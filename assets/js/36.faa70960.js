(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{548:function(s,t,a){"use strict";a.r(t);var e=a(2),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"第一章-telnet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第一章-telnet"}},[s._v("#")]),s._v(" 第一章 Telnet")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-qa")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" telnet   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看telnet的安装包")]),s._v("\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" telnet\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#或安装telnet两个包客户端和服务端")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" telnet\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("systemctl start telnet.socket             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启telnet")]),s._v("\nsystemctl stop firewalld.service         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#关闭防火墙")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("systemctl stop firewalld       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#临时关闭防火墙")]),s._v("\nsystemctl disable firewalld    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#永久关闭防火墙")]),s._v("\nsetenforce "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#临时关闭SELiunx")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Setenforce: SELiunx is disabled")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/seliunx/config           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#永久关闭seliunx")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#SELIUNX=disabled                 将enforcing改为disabled")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"第二章-ssh"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二章-ssh"}},[s._v("#")]),s._v(" 第二章 SSH")]),s._v(" "),t("p",[s._v("禁止bairoot登录:")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/ssh/sshd_config\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("设置 PermitRootLogin no\n重启dusshd服务\n3次登录密码错误zhi，锁定账户dao5分钟：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/etc/pam.d/sshd增加")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"auth required pam_tally.so deny=3 unlock_time=5"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/pam.d/sshd\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_2-1-限制用户-ssh-登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-限制用户-ssh-登录"}},[s._v("#")]),s._v(" 2.1 限制用户 SSH 登录")]),s._v(" "),t("h4",{attrs:{id:"_2-1-1-只允许指定用户进行登录-白名单"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-只允许指定用户进行登录-白名单"}},[s._v("#")]),s._v(" 2.1.1 只允许指定用户进行登录（白名单）")]),s._v(" "),t("p",[s._v("在 /etc/ssh/sshd_config 配置文件中设置 AllowUsers 选项，（配置完成需要重启 SSHD 服务）格式如下：\nAllowUsers    aliyun test@192.168.1.1")]),s._v(" "),t("p",[s._v("#允许 aliyun 和从 192.168.1.1 登录的 test 帐户通过 SSH 登录系统。")]),s._v(" "),t("h4",{attrs:{id:"_2-1-2-只拒绝指定用户进行登录-黑名单"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-只拒绝指定用户进行登录-黑名单"}},[s._v("#")]),s._v(" 2.1.2 只拒绝指定用户进行登录（黑名单）")]),s._v(" "),t("p",[s._v("在/etc/ssh/sshd_config配置文件中设置DenyUsers选项，（配置完成需要重启SSHD服务）格式如下："),t("br"),s._v("\nDenyUsers    zhangsan aliyun    #Linux系统账户")]),s._v(" "),t("p",[s._v("#拒绝 zhangsan、aliyun 帐户通过 SSH 登录系统")]),s._v(" "),t("p",[s._v("限制 IP SSH 登录#")]),s._v(" "),t("p",[s._v("除了可以禁止某个用户登录，我们还可以针对固定的IP进行禁止登录，linux 服务器通过设置 /etc/hosts.allow 和 /etc/hosts.deny 这个两个文件，hosts.allow许可大于hosts.deny可以限制或者允许某个或者某段IP地址远程 SSH 登录服务器.方法比较简单，具体如下：")]),s._v(" "),t("ol",[t("li",[s._v("vim /etc/hosts.allow， 添加\nsshd:192.168.0.1:allow  #允许 192.168.0.1 这个 IP 地址 ssh 登录")])]),s._v(" "),t("p",[s._v("sshd:192.168.0.1/24:allow #允许 192.168.0.1/24 这段 IP 地址的用户登录")]),s._v(" "),t("p",[t("img",{attrs:{src:"ssh/1.jpg",alt:""}})]),s._v(" "),t("p",[s._v("2.vim /etc/hosts.allow，添加\nsshd:ALL # 允许全部的 ssh 登录")]),s._v(" "),t("p",[t("img",{attrs:{src:"ssh/2.jpg",alt:""}})]),s._v(" "),t("p",[s._v("hosts.allow 和hosts.deny 两个文件同时设置规则的时候，hosts.allow 文件中的规则优先级高，按照此方法设置后服务器只允许 192.168.0.1 这个 IP 地址的 ssh 登录，其它的 IP 都会拒绝。")])])}),[],!1,null,null,null);t.default=n.exports}}]);