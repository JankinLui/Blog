(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{527:function(n,s,a){n.exports=a.p+"assets/img/1.51a0555e.png"},528:function(n,s,a){n.exports=a.p+"assets/img/2.ca8f5b06.png"},529:function(n,s,a){n.exports=a.p+"assets/img/3.e170778d.png"},530:function(n,s,a){n.exports=a.p+"assets/img/4.8b31a45e.png"},531:function(n,s,a){n.exports=a.p+"assets/img/sw1.e60f6e15.png"},532:function(n,s,a){n.exports=a.p+"assets/img/sw2.e5edd870.png"},586:function(n,s,a){"use strict";a.r(s);var t=a(2),e=Object(t.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[n._v("Spanning-tree mst configurtaion\n\tInstance "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("1")]),n._v(" vlan "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("20")]),n._v("\n\tInstance "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("2")]),n._v(" vlan "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("40")]),n._v("\nSpanning-tree mst "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("1")]),n._v(" priority "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("4096")]),n._v("\nSpanning-tree mst "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("1")]),n._v(" priority "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("8192")]),n._v("```\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br")])]),s("p",[n._v("注：两个三层的交换机配置几乎一样，除优先级\n4096>8192\n越大的交换机的主根就越大\n如果有二层交换机，二层上面也要配置spanning-tree,但不用配置优先级")]),n._v(" "),s("p",[n._v("根据图有关生成树的部分要全部打trunk链路名，并做vlan的修建")]),n._v(" "),s("p",[s("code",[n._v("switchport trunk allowed vlan 10;20;30;40")])]),n._v(" "),s("h2",{attrs:{id:"第一章-例1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一章-例1"}},[n._v("#")]),n._v(" 第一章 例1")]),n._v(" "),s("p",[s("img",{attrs:{src:a(527),alt:"mstp"}})]),n._v(" "),s("p",[n._v("网络中的4台交换机运行MSTP。其中SW1做为Vlan 10,20的根桥，SW2做为Vlan 30,40的根桥。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("SW1(config)#port-group 1 \n\nSW1(config)#interface ethernet 1/1-2 \n\nSW1(Config-If-Port-Range)#port-group 1 mode on\n\nSW1(Config-If-Port-Range)#exit\n\n \\#配置MSTP，并创建MSTP多实例\n\nSW1(config)#spanning-tree\n\nSW1(config)#spanning-tree mst configurtaion\n\nSW1(config-Mstp-Region)#name test\n\nSW1(config-Mstp-Region)#instance 1 vlan 10;20\n\nSW1(config-Mstp-Region)#instance 2 vlan 30;40\n\nSW1(config-Mstp-Region)#exit\n\nSW1(config)#spanning-tree mst 1 priority 4096\n\nSW1(config)#spanning-tree mst 2 priority 8192\n\n \\#配置端口模式和透传的Vlan信息\n\n 配置E 1/1-2为Trunk，设置透传Vlan 10,20,30,40\n\nSW1(config)#interface port-group 1\n\nSW1(config-if-port-group-1)#switchport mode trunk\n\nSW1(config-if-port-group-1)#switchport trunk allowed vlan 10;20;30;40\n\nSW1(config-if-port-group-1)#exit\n\n 配置E 1/3为Trunk，设置透传Vlan 10,20\n\nSW1(config)#interface ethernet 1/3\n\nSW1(config-if-ethernet 1/3)#switchport mode trunk\n\nSW1(config-if-ethernet 1/3)#switchport trunk allowed vlan 10;20\n\nSW1(config-if-ethernet 1/3)#exit\n\n 配置E 1/4为Trunk，设置透传Vlan 30,40\n\nSW1(config)#interface ethernet 1/4\n\nSW1(config-if-ethernet 1/4)#switchport mode trunk\n\nSW1(config-if-ethernet 1/4)#switchport trunk allowed vlan 30;40\n\nSW1(config-if-ethernet 1/4)#exit\n\n \n\n(2)SW2的配置\n\n \\#配置端口聚合\n\nSW2(config)#port-group 1 \n\nSW2(config)#interface ethernet 1/1-2 \n\nSW2(Config-If-Port-Range)#port-group 1 mode on\n\nSW2(Config-If-Port-Range)#exit\n\n \\#配置MSTP，并创建MSTP多实例\n\nSW2(config)#spanning-tree\n\nSW2(config)#spanning-tree mst configurtaion\n\nSW2(config-Mstp-Region)#name test\n\nSW2(config-Mstp-Region)#instance 1 vlan 10;20\n\nSW2(config-Mstp-Region)#instance 2 vlan 30;40\n\nSW2(config-Mstp-Region)#exit\n\nSW2(config)#spanning-tree mst 1 priority 8192\n\nSW2(config)#spanning-tree mst 2 priority 4096\n\n \\#配置端口模式和透传的Vlan信息\n\n 配置E 1/1-2为Trunk，设置透传Vlan 10,20,30,40\n\nSW2(config)#interface port-group 1\n\nSW2(config-if-port-group-1)#switchport mode on\n\nSW2(config-if-port-group-1)#switchport trunk allowed vlan 10;20;30;40\n\nSW2(config-if-port-group-1)#exit\n\n 配置E 1/3为Trunk，设置透传Vlan 10,20\n\nSW2(config)#interface ethernet 1/3\n\nSW2(config-if-ethernet 1/3)#switchport mode trunk\n\nSW2(config-if-ethernet 1/3)#switchport trunk allowed vlan 10;20\n\nSW2(config-if-ethernet 1/3)#exit\n\n 配置E 1/4为Trunk，设置透传Vlan 30,40\n\nSW2(config)#interface ethernet 1/4\n\nSW2(config-if-ethernet 1/4)#switchport mode trunk\n\nSW2(config-if-ethernet 1/4)#switchport trunk allowed vlan 30;40\n\nSW2(config-if-ethernet 1/4)#exit\n\n \n\n(3)S1的配置\n\n \\#配置MSTP，并创建MSTP多实例\n\nS1(config)#spanning-tree\n\nS1(config)#spanning-tree mst configurtaion\n\nS1(config-Mstp-Region)#name test\n\nS1(config-Mstp-Region)#instance 1 vlan 10;20\n\nS1(config-Mstp-Region)#instance 2 vlan 30;40\n\nS1(config-Mstp-Region)#exit\n\n \\#配置端口模式和透传的Vlan信息（配置E 1/1-2为Trunk，设置透传Vlan 10,20）\n\nS1(config)#interface ethernet 1/1-2\n\nS1(config-if-port-range)#switchport mode trunk\n\nS1(config-if-port-range)#switchport trunk allowed vlan 10;20\n\nS1(config-if-port-range)#exit\n\n \n\n(4)S2的配置\n\n \\#配置MSTP，并创建MSTP多实例\n\nS2(config)#spanning-tree\n\nS2(config)#spanning-tree mst configurtaion\n\nS2(config-Mstp-Region)#name test\n\nS2(config-Mstp-Region)#instance 1 vlan 10;20\n\nS2(config-Mstp-Region)#instance 2 vlan 30;40\n\nS2(config-Mstp-Region)#exit\n\n \\#配置端口模式和透传的Vlan信息（配置E 1/1-2为Trunk，设置透传Vlan 30,40）\n\nS2(config)#interface ethernet 1/1-2\n\nS2(config-if-port-range)#switchport mode trunk\n\nS2(config-if-port-range)#switchport trunk allowed vlan 30;40\n\nS2(config-if-port-range)#exit\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br"),s("span",{staticClass:"line-number"},[n._v("75")]),s("br"),s("span",{staticClass:"line-number"},[n._v("76")]),s("br"),s("span",{staticClass:"line-number"},[n._v("77")]),s("br"),s("span",{staticClass:"line-number"},[n._v("78")]),s("br"),s("span",{staticClass:"line-number"},[n._v("79")]),s("br"),s("span",{staticClass:"line-number"},[n._v("80")]),s("br"),s("span",{staticClass:"line-number"},[n._v("81")]),s("br"),s("span",{staticClass:"line-number"},[n._v("82")]),s("br"),s("span",{staticClass:"line-number"},[n._v("83")]),s("br"),s("span",{staticClass:"line-number"},[n._v("84")]),s("br"),s("span",{staticClass:"line-number"},[n._v("85")]),s("br"),s("span",{staticClass:"line-number"},[n._v("86")]),s("br"),s("span",{staticClass:"line-number"},[n._v("87")]),s("br"),s("span",{staticClass:"line-number"},[n._v("88")]),s("br"),s("span",{staticClass:"line-number"},[n._v("89")]),s("br"),s("span",{staticClass:"line-number"},[n._v("90")]),s("br"),s("span",{staticClass:"line-number"},[n._v("91")]),s("br"),s("span",{staticClass:"line-number"},[n._v("92")]),s("br"),s("span",{staticClass:"line-number"},[n._v("93")]),s("br"),s("span",{staticClass:"line-number"},[n._v("94")]),s("br"),s("span",{staticClass:"line-number"},[n._v("95")]),s("br"),s("span",{staticClass:"line-number"},[n._v("96")]),s("br"),s("span",{staticClass:"line-number"},[n._v("97")]),s("br"),s("span",{staticClass:"line-number"},[n._v("98")]),s("br"),s("span",{staticClass:"line-number"},[n._v("99")]),s("br"),s("span",{staticClass:"line-number"},[n._v("100")]),s("br"),s("span",{staticClass:"line-number"},[n._v("101")]),s("br"),s("span",{staticClass:"line-number"},[n._v("102")]),s("br"),s("span",{staticClass:"line-number"},[n._v("103")]),s("br"),s("span",{staticClass:"line-number"},[n._v("104")]),s("br"),s("span",{staticClass:"line-number"},[n._v("105")]),s("br"),s("span",{staticClass:"line-number"},[n._v("106")]),s("br"),s("span",{staticClass:"line-number"},[n._v("107")]),s("br"),s("span",{staticClass:"line-number"},[n._v("108")]),s("br"),s("span",{staticClass:"line-number"},[n._v("109")]),s("br"),s("span",{staticClass:"line-number"},[n._v("110")]),s("br"),s("span",{staticClass:"line-number"},[n._v("111")]),s("br"),s("span",{staticClass:"line-number"},[n._v("112")]),s("br"),s("span",{staticClass:"line-number"},[n._v("113")]),s("br"),s("span",{staticClass:"line-number"},[n._v("114")]),s("br"),s("span",{staticClass:"line-number"},[n._v("115")]),s("br"),s("span",{staticClass:"line-number"},[n._v("116")]),s("br"),s("span",{staticClass:"line-number"},[n._v("117")]),s("br"),s("span",{staticClass:"line-number"},[n._v("118")]),s("br"),s("span",{staticClass:"line-number"},[n._v("119")]),s("br"),s("span",{staticClass:"line-number"},[n._v("120")]),s("br"),s("span",{staticClass:"line-number"},[n._v("121")]),s("br"),s("span",{staticClass:"line-number"},[n._v("122")]),s("br"),s("span",{staticClass:"line-number"},[n._v("123")]),s("br"),s("span",{staticClass:"line-number"},[n._v("124")]),s("br"),s("span",{staticClass:"line-number"},[n._v("125")]),s("br"),s("span",{staticClass:"line-number"},[n._v("126")]),s("br"),s("span",{staticClass:"line-number"},[n._v("127")]),s("br"),s("span",{staticClass:"line-number"},[n._v("128")]),s("br"),s("span",{staticClass:"line-number"},[n._v("129")]),s("br"),s("span",{staticClass:"line-number"},[n._v("130")]),s("br"),s("span",{staticClass:"line-number"},[n._v("131")]),s("br"),s("span",{staticClass:"line-number"},[n._v("132")]),s("br"),s("span",{staticClass:"line-number"},[n._v("133")]),s("br"),s("span",{staticClass:"line-number"},[n._v("134")]),s("br"),s("span",{staticClass:"line-number"},[n._v("135")]),s("br"),s("span",{staticClass:"line-number"},[n._v("136")]),s("br"),s("span",{staticClass:"line-number"},[n._v("137")]),s("br"),s("span",{staticClass:"line-number"},[n._v("138")]),s("br"),s("span",{staticClass:"line-number"},[n._v("139")]),s("br"),s("span",{staticClass:"line-number"},[n._v("140")]),s("br"),s("span",{staticClass:"line-number"},[n._v("141")]),s("br"),s("span",{staticClass:"line-number"},[n._v("142")]),s("br"),s("span",{staticClass:"line-number"},[n._v("143")]),s("br"),s("span",{staticClass:"line-number"},[n._v("144")]),s("br"),s("span",{staticClass:"line-number"},[n._v("145")]),s("br"),s("span",{staticClass:"line-number"},[n._v("146")]),s("br"),s("span",{staticClass:"line-number"},[n._v("147")]),s("br"),s("span",{staticClass:"line-number"},[n._v("148")]),s("br"),s("span",{staticClass:"line-number"},[n._v("149")]),s("br"),s("span",{staticClass:"line-number"},[n._v("150")]),s("br"),s("span",{staticClass:"line-number"},[n._v("151")]),s("br"),s("span",{staticClass:"line-number"},[n._v("152")]),s("br"),s("span",{staticClass:"line-number"},[n._v("153")]),s("br"),s("span",{staticClass:"line-number"},[n._v("154")]),s("br"),s("span",{staticClass:"line-number"},[n._v("155")]),s("br"),s("span",{staticClass:"line-number"},[n._v("156")]),s("br"),s("span",{staticClass:"line-number"},[n._v("157")]),s("br"),s("span",{staticClass:"line-number"},[n._v("158")]),s("br"),s("span",{staticClass:"line-number"},[n._v("159")]),s("br"),s("span",{staticClass:"line-number"},[n._v("160")]),s("br"),s("span",{staticClass:"line-number"},[n._v("161")]),s("br"),s("span",{staticClass:"line-number"},[n._v("162")]),s("br"),s("span",{staticClass:"line-number"},[n._v("163")]),s("br"),s("span",{staticClass:"line-number"},[n._v("164")]),s("br"),s("span",{staticClass:"line-number"},[n._v("165")]),s("br"),s("span",{staticClass:"line-number"},[n._v("166")]),s("br"),s("span",{staticClass:"line-number"},[n._v("167")]),s("br"),s("span",{staticClass:"line-number"},[n._v("168")]),s("br"),s("span",{staticClass:"line-number"},[n._v("169")]),s("br"),s("span",{staticClass:"line-number"},[n._v("170")]),s("br"),s("span",{staticClass:"line-number"},[n._v("171")]),s("br"),s("span",{staticClass:"line-number"},[n._v("172")]),s("br"),s("span",{staticClass:"line-number"},[n._v("173")]),s("br"),s("span",{staticClass:"line-number"},[n._v("174")]),s("br"),s("span",{staticClass:"line-number"},[n._v("175")]),s("br"),s("span",{staticClass:"line-number"},[n._v("176")]),s("br"),s("span",{staticClass:"line-number"},[n._v("177")]),s("br")])]),s("h2",{attrs:{id:"第二章-例2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二章-例2"}},[n._v("#")]),n._v(" 第二章 例2")]),n._v(" "),s("p",[s("img",{attrs:{src:a(528),alt:"mstp"}})]),n._v(" "),s("p",[n._v("网络中的3台交换机运行MSTP。其中SW1做为Vlan 10,20的根桥，SW2做为Vlan 30,40的根桥。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("SW1(config)#port-group 1 \n\nSW1(config)#interface ethernet 1/1-2 \n\nSW1(Config-If-Port-Range)#port-group 1 mode on\n\nSW1(Config-If-Port-Range)#exit\n\n \\#配置MSTP，并创建MSTP多实例\n\nSW1(config)#spanning-tree\n\nSW1(config)#spanning-tree mst configurtaion\n\nSW1(config-Mstp-Region)#name test\n\nSW1(config-Mstp-Region)#instance 1 vlan 10;20\n\nSW1(config-Mstp-Region)#instance 2 vlan 30;40\n\nSW1(config-Mstp-Region)#exit\n\nSW1(config)#spanning-tree mst 1 priority 4096\n\nSW1(config)#spanning-tree mst 2 priority 8192\n\n \\#配置端口模式和透传的Vlan信息\n\n 配置E 1/1-2为Trunk，设置透传Vlan 10,20,30,40\n\nSW1(config)#interface port-group 1\n\nSW1(config-if-port-group-1)#switchport mode trunk\n\nSW1(config-if-port-group-1)#switchport trunk allowed vlan 10;20;30;40\n\nSW1(config-if-port-group-1)#exit\n\n 配置E 1/3为Trunk，设置透传Vlan 10,20\n\nSW1(config)#interface ethernet 1/3\n\nSW1(config-if-ethernet 1/3)#switchport mode trunk\n\nSW1(config-if-ethernet 1/3)#switchport trunk allowed vlan 10;20\n\nSW1(config-if-ethernet 1/3)#exit\n\n \n\n(2)SW2的配置\n\n \\#配置端口聚合\n\nSW2(config)#port-group 1 \n\nSW2(config)#interface ethernet 1/1-2 \n\nSW2(Config-If-Port-Range)#port-group 1 mode on\n\nSW2(Config-If-Port-Range)#exit\n\n \\#配置MSTP，并创建MSTP多实例\n\nSW2(config)#spanning-tree\n\nSW2(config)#spanning-tree mst configurtaion\n\nSW2(config-Mstp-Region)#name test\n\nSW2(config-Mstp-Region)#instance 1 vlan 10;20\n\nSW2(config-Mstp-Region)#instance 2 vlan 30;40\n\nSW2(config-Mstp-Region)#exit\n\nSW2(config)#spanning-tree mst 1 priority 8192\n\nSW2(config)#spanning-tree mst 2 priority 4096\n\n \\#配置端口模式和透传的Vlan信息\n\n 配置E 1/1-2为Trunk，设置透传Vlan 10,20,30,40\n\nSW2(config)#interface port-group 1\n\nSW2(config-if-port-group-1)#switchport mode trunk\n\nSW2(config-if-port-group-1)#switchport trunk allowed vlan 10;20;30;40\n\nSW2(config-if-port-group-1)#exit\n\n 配置E 1/3为Trunk，设置透传Vlan 10,20\n\nSW2(config)#interface ethernet 1/3\n\nSW2(config-if-ethernet 1/3)#switchport mode trunk\n\nSW2(config-if-ethernet 1/3)#switchport trunk allowed vlan 10;20\n\nSW2(config-if-ethernet 1/3)#exit\n\n \n\n(3)S1的配置\n\n \\#配置MSTP，并创建MSTP多实例\n\nS1(config)#spanning-tree\n\nS1(config)#spanning-tree mst configurtaion\n\nS1(config-Mstp-Region)#name test\n\nS1(config-Mstp-Region)#instance 1 vlan 10;20\n\nS1(config-Mstp-Region)#instance 2 vlan 30;40\n\nS1(config-Mstp-Region)#exit\n\n \\#配置端口模式和透传的Vlan信息（配置E 1/1-2为Trunk，设置透传Vlan 10,20）\n\nS1(config)#interface ethernet 1/1-2\n\nS1(config-if-port-range)#switchport mode trunk\n\nS1(config-if-port-range)#switchport trunk allowed vlan 10;20\n\nS1(config-if-port-range)#exit\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br"),s("span",{staticClass:"line-number"},[n._v("75")]),s("br"),s("span",{staticClass:"line-number"},[n._v("76")]),s("br"),s("span",{staticClass:"line-number"},[n._v("77")]),s("br"),s("span",{staticClass:"line-number"},[n._v("78")]),s("br"),s("span",{staticClass:"line-number"},[n._v("79")]),s("br"),s("span",{staticClass:"line-number"},[n._v("80")]),s("br"),s("span",{staticClass:"line-number"},[n._v("81")]),s("br"),s("span",{staticClass:"line-number"},[n._v("82")]),s("br"),s("span",{staticClass:"line-number"},[n._v("83")]),s("br"),s("span",{staticClass:"line-number"},[n._v("84")]),s("br"),s("span",{staticClass:"line-number"},[n._v("85")]),s("br"),s("span",{staticClass:"line-number"},[n._v("86")]),s("br"),s("span",{staticClass:"line-number"},[n._v("87")]),s("br"),s("span",{staticClass:"line-number"},[n._v("88")]),s("br"),s("span",{staticClass:"line-number"},[n._v("89")]),s("br"),s("span",{staticClass:"line-number"},[n._v("90")]),s("br"),s("span",{staticClass:"line-number"},[n._v("91")]),s("br"),s("span",{staticClass:"line-number"},[n._v("92")]),s("br"),s("span",{staticClass:"line-number"},[n._v("93")]),s("br"),s("span",{staticClass:"line-number"},[n._v("94")]),s("br"),s("span",{staticClass:"line-number"},[n._v("95")]),s("br"),s("span",{staticClass:"line-number"},[n._v("96")]),s("br"),s("span",{staticClass:"line-number"},[n._v("97")]),s("br"),s("span",{staticClass:"line-number"},[n._v("98")]),s("br"),s("span",{staticClass:"line-number"},[n._v("99")]),s("br"),s("span",{staticClass:"line-number"},[n._v("100")]),s("br"),s("span",{staticClass:"line-number"},[n._v("101")]),s("br"),s("span",{staticClass:"line-number"},[n._v("102")]),s("br"),s("span",{staticClass:"line-number"},[n._v("103")]),s("br"),s("span",{staticClass:"line-number"},[n._v("104")]),s("br"),s("span",{staticClass:"line-number"},[n._v("105")]),s("br"),s("span",{staticClass:"line-number"},[n._v("106")]),s("br"),s("span",{staticClass:"line-number"},[n._v("107")]),s("br"),s("span",{staticClass:"line-number"},[n._v("108")]),s("br"),s("span",{staticClass:"line-number"},[n._v("109")]),s("br"),s("span",{staticClass:"line-number"},[n._v("110")]),s("br"),s("span",{staticClass:"line-number"},[n._v("111")]),s("br"),s("span",{staticClass:"line-number"},[n._v("112")]),s("br"),s("span",{staticClass:"line-number"},[n._v("113")]),s("br"),s("span",{staticClass:"line-number"},[n._v("114")]),s("br"),s("span",{staticClass:"line-number"},[n._v("115")]),s("br"),s("span",{staticClass:"line-number"},[n._v("116")]),s("br"),s("span",{staticClass:"line-number"},[n._v("117")]),s("br"),s("span",{staticClass:"line-number"},[n._v("118")]),s("br"),s("span",{staticClass:"line-number"},[n._v("119")]),s("br"),s("span",{staticClass:"line-number"},[n._v("120")]),s("br"),s("span",{staticClass:"line-number"},[n._v("121")]),s("br"),s("span",{staticClass:"line-number"},[n._v("122")]),s("br"),s("span",{staticClass:"line-number"},[n._v("123")]),s("br"),s("span",{staticClass:"line-number"},[n._v("124")]),s("br"),s("span",{staticClass:"line-number"},[n._v("125")]),s("br"),s("span",{staticClass:"line-number"},[n._v("126")]),s("br"),s("span",{staticClass:"line-number"},[n._v("127")]),s("br"),s("span",{staticClass:"line-number"},[n._v("128")]),s("br"),s("span",{staticClass:"line-number"},[n._v("129")]),s("br")])]),s("h2",{attrs:{id:"第三章-例3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三章-例3"}},[n._v("#")]),n._v(" 第三章 例3")]),n._v(" "),s("p",[s("img",{attrs:{src:a(529),alt:"mstp"}})]),n._v(" "),s("p",[n._v("网络中的3台交换机运行MSTP。其中SW1做为Vlan 10,20的根桥，SW2做为Vlan 30,40的根桥。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("(1)SW1的配置\n\n \\#配置端口聚合\n\nSW1(config)#port-group 1 \n\nSW1(config)#interface ethernet 1/1-2 \n\nSW1(Config-If-Port-Range)#port-group 1 mode on\n\nSW1(Config-If-Port-Range)#exit\n\n \\#配置MSTP，并创建MSTP多实例\n\nSW1(config)#spanning-tree\n\nSW1(config)#spanning-tree mst configurtaion\n\nSW1(config-Mstp-Region)#name test\n\nSW1(config-Mstp-Region)#instance 1 vlan 10;20\n\nSW1(config-Mstp-Region)#instance 2 vlan 30;40\n\nSW1(config-Mstp-Region)#exit\n\nSW1(config)#spanning-tree mst 1 priority 4096\n\nSW1(config)#spanning-tree mst 2 priority 8192\n\n \\#配置端口模式和透传的Vlan信息\n\n 配置E 1/1-2为Trunk，设置透传Vlan 10,20,30,40\n\nSW1(config)#interface port-group 1\n\nSW1(config-if-port-group-1)#switchport mode trunk\n\nSW1(config-if-port-group-1)#switchport trunk allowed vlan 10;20;30;40\n\nSW1(config-if-port-group-1)#exit\n\n 配置E 1/3-4为Trunk，设置透传Vlan 10,20\n\nSW1(config)#interface ethernet 1/3-4\n\nSW1(config-if-port-range)#switchport mode trunk\n\nSW1(config-if-port-range)#switchport trunk allowed vlan 10;20\n\nSW1(config-if-port-range)#exit\n\n \n\n(2)SW2的配置\n\n \\#配置端口聚合\n\nSW2(config)#port-group 1 \n\nSW2(config)#interface ethernet 1/1-2 \n\nSW2(Config-If-Port-Range)#port-group 1 mode on\n\nSW2(Config-If-Port-Range)#exit\n\n \\#配置MSTP，并创建MSTP多实例\n\nSW2(config)#spanning-tree\n\nSW2(config)#spanning-tree mst configurtaion\n\nSW2(config-Mstp-Region)#name test\n\nSW2(config-Mstp-Region)#instance 1 vlan 10;20\n\nSW2(config-Mstp-Region)#instance 2 vlan 30;40\n\nSW2(config-Mstp-Region)#exit\n\nSW2(config)#spanning-tree mst 1 priority 8192\n\nSW2(config)#spanning-tree mst 2 priority 4096\n\n \\#配置端口模式和透传的Vlan信息\n\n 配置E 1/1-2为Trunk，设置透传Vlan 10,20,30,40\n\nSW2(config)#interface port-group 1\n\nSW2(config-if-port-group-1)#switchport mode trunk\n\nSW2(config-if-port-group-1)#switchport trunk allowed vlan 10;20;30;40\n\nSW2(config-if-port-group-1)#exit\n\n 配置E 1/3-4为Trunk，设置透传Vlan 10,20\n\nSW2(config)#interface ethernet 1/3-4\n\nSW2(config-if-port-range)#switchport mode trunk\n\nSW2(config-if-port-range)#switchport trunk allowed vlan 10;20\n\nSW2(config-if-port-range)#exit\n\n \n\n(3)S1的配置\n\n \\#配置MSTP，并创建MSTP多实例\n\nS1(config)#spanning-tree\n\nS1(config)#spanning-tree mst configurtaion\n\nS1(config-Mstp-Region)#name test\n\nS1(config-Mstp-Region)#instance 1 vlan 10;20\n\nS1(config-Mstp-Region)#instance 2 vlan 30;40\n\nS1(config-Mstp-Region)#exit\n\n #配置端口模式和透传的Vlan信息（配置E 1/1-4为Trunk，设置透传Vlan 10,20）\n\nS1(config)#interface ethernet 1/1-4\n\nS1(config-if-port-range)#switchport mode trunk\n\nS1(config-if-port-range)#switchport trunk allowed vlan 10;20\n\nS1(config-if-port-range)#exit\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br"),s("span",{staticClass:"line-number"},[n._v("75")]),s("br"),s("span",{staticClass:"line-number"},[n._v("76")]),s("br"),s("span",{staticClass:"line-number"},[n._v("77")]),s("br"),s("span",{staticClass:"line-number"},[n._v("78")]),s("br"),s("span",{staticClass:"line-number"},[n._v("79")]),s("br"),s("span",{staticClass:"line-number"},[n._v("80")]),s("br"),s("span",{staticClass:"line-number"},[n._v("81")]),s("br"),s("span",{staticClass:"line-number"},[n._v("82")]),s("br"),s("span",{staticClass:"line-number"},[n._v("83")]),s("br"),s("span",{staticClass:"line-number"},[n._v("84")]),s("br"),s("span",{staticClass:"line-number"},[n._v("85")]),s("br"),s("span",{staticClass:"line-number"},[n._v("86")]),s("br"),s("span",{staticClass:"line-number"},[n._v("87")]),s("br"),s("span",{staticClass:"line-number"},[n._v("88")]),s("br"),s("span",{staticClass:"line-number"},[n._v("89")]),s("br"),s("span",{staticClass:"line-number"},[n._v("90")]),s("br"),s("span",{staticClass:"line-number"},[n._v("91")]),s("br"),s("span",{staticClass:"line-number"},[n._v("92")]),s("br"),s("span",{staticClass:"line-number"},[n._v("93")]),s("br"),s("span",{staticClass:"line-number"},[n._v("94")]),s("br"),s("span",{staticClass:"line-number"},[n._v("95")]),s("br"),s("span",{staticClass:"line-number"},[n._v("96")]),s("br"),s("span",{staticClass:"line-number"},[n._v("97")]),s("br"),s("span",{staticClass:"line-number"},[n._v("98")]),s("br"),s("span",{staticClass:"line-number"},[n._v("99")]),s("br"),s("span",{staticClass:"line-number"},[n._v("100")]),s("br"),s("span",{staticClass:"line-number"},[n._v("101")]),s("br"),s("span",{staticClass:"line-number"},[n._v("102")]),s("br"),s("span",{staticClass:"line-number"},[n._v("103")]),s("br"),s("span",{staticClass:"line-number"},[n._v("104")]),s("br"),s("span",{staticClass:"line-number"},[n._v("105")]),s("br"),s("span",{staticClass:"line-number"},[n._v("106")]),s("br"),s("span",{staticClass:"line-number"},[n._v("107")]),s("br"),s("span",{staticClass:"line-number"},[n._v("108")]),s("br"),s("span",{staticClass:"line-number"},[n._v("109")]),s("br"),s("span",{staticClass:"line-number"},[n._v("110")]),s("br"),s("span",{staticClass:"line-number"},[n._v("111")]),s("br"),s("span",{staticClass:"line-number"},[n._v("112")]),s("br"),s("span",{staticClass:"line-number"},[n._v("113")]),s("br"),s("span",{staticClass:"line-number"},[n._v("114")]),s("br"),s("span",{staticClass:"line-number"},[n._v("115")]),s("br"),s("span",{staticClass:"line-number"},[n._v("116")]),s("br"),s("span",{staticClass:"line-number"},[n._v("117")]),s("br"),s("span",{staticClass:"line-number"},[n._v("118")]),s("br"),s("span",{staticClass:"line-number"},[n._v("119")]),s("br"),s("span",{staticClass:"line-number"},[n._v("120")]),s("br"),s("span",{staticClass:"line-number"},[n._v("121")]),s("br"),s("span",{staticClass:"line-number"},[n._v("122")]),s("br"),s("span",{staticClass:"line-number"},[n._v("123")]),s("br"),s("span",{staticClass:"line-number"},[n._v("124")]),s("br"),s("span",{staticClass:"line-number"},[n._v("125")]),s("br"),s("span",{staticClass:"line-number"},[n._v("126")]),s("br"),s("span",{staticClass:"line-number"},[n._v("127")]),s("br"),s("span",{staticClass:"line-number"},[n._v("128")]),s("br"),s("span",{staticClass:"line-number"},[n._v("129")]),s("br"),s("span",{staticClass:"line-number"},[n._v("130")]),s("br"),s("span",{staticClass:"line-number"},[n._v("131")]),s("br"),s("span",{staticClass:"line-number"},[n._v("132")]),s("br"),s("span",{staticClass:"line-number"},[n._v("133")]),s("br")])]),s("h2",{attrs:{id:"第四章-例4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第四章-例4"}},[n._v("#")]),n._v(" 第四章 例4")]),n._v(" "),s("p",[s("img",{attrs:{src:a(530),alt:"mstp"}})]),n._v(" "),s("p",[n._v("​      网络中的3台交换机运行MSTP。其中SW1做为Vlan 10,20的根桥，SW2做为Vlan 30,40的根桥。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("(1)SW1的配置\n\n \\#配置端口聚合\n\nSW1(config)#port-group 1 \n\nSW1(config)#interface ethernet 1/1-2 \n\nSW1(Config-If-Port-Range)#port-group 1 mode on\n\nSW1(Config-If-Port-Range)#exit\n\n \\#配置MSTP，并创建MSTP多实例\n\nSW1(config)#spanning-tree\n\nSW1(config)#spanning-tree mst configurtaion\n\nSW1(config-Mstp-Region)#name test\n\nSW1(config-Mstp-Region)#instance 1 vlan 10;20\n\nSW1(config-Mstp-Region)#instance 2 vlan 30;40\n\nSW1(config-Mstp-Region)#exit\n\nSW1(config)#spanning-tree mst 1 priority 4096\n\nSW1(config)#spanning-tree mst 2 priority 8192\n\n \\#配置端口模式和透传的Vlan信息\n\n 配置E 1/1-2为Trunk，设置透传Vlan 10,20,30,40\n\nSW1(config)#interface port-group 1\n\nSW1(config-if-port-group-1)#switchport mode trunk\n\nSW1(config-if-port-group-1)#switchport trunk allowed vlan 10;20;30;40\n\nSW1(config-if-port-group-1)#exit\n\n 配置E 1/3-4为Trunk，设置透传Vlan 10,20,30,40\n\nSW1(config)#interface ethernet 1/3-4\n\nSW1(config-if-port-range)#switchport mode trunk\n\nSW1(config-if-port-range)#switchport trunk allowed vlan 10;20;30;40\n\nSW1(config-if-port-range)#exit\n\n \n\n(2)SW2的配置\n\n \\#配置端口聚合\n\nSW2(config)#port-group 1 \n\nSW2(config)#interface ethernet 1/1-2 \n\nSW2(Config-If-Port-Range)#port-group 1 mode on\n\nSW2(Config-If-Port-Range)#exit\n\n \\#配置MSTP，并创建MSTP多实例\n\nSW2(config)#spanning-tree\n\nSW2(config)#spanning-tree mst configurtaion\n\nSW2(config-Mstp-Region)#name test\n\nSW2(config-Mstp-Region)#instance 1 vlan 10;20\n\nSW2(config-Mstp-Region)#instance 2 vlan 30;40\n\nSW2(config-Mstp-Region)#exit\n\nSW2(config)#spanning-tree mst 1 priority 8192\n\nSW2(config)#spanning-tree mst 2 priority 4096\n\n \\#配置端口模式和透传的Vlan信息\n\n 配置E 1/1-2为Trunk，设置透传Vlan 10,20,30,40\n\nSW2(config)#interface port-group 1\n\nSW2(config-if-port-group-1)#switchport mode trunk\n\nSW2(config-if-port-group-1)#switchport trunk allowed vlan 10;20;30;40\n\nSW2(config-if-port-group-1)#exit\n\n 配置E 1/3-4为Trunk，设置透传Vlan 10,20,30,40\n\nSW2(config)#interface ethernet 1/3-4\n\nSW2(config-if-port-range)#switchport mode trunk\n\nSW2(config-if-port-range)#switchport trunk allowed vlan 10;20;30;40\n\nSW2(config-if-port-range)#exit\n\n 配置E 1/5为Access端口，指派到Vlan 40\n\nSW2(config)#vlan 40\n\nSW2(config-vlan40)#switchport interface ethernet 1/5\n\n \n\n(3)S1的配置\n\n \\#配置MSTP，并创建MSTP多实例\n\n'S1(config)#spanning-tree\n\nS1(config)#spanning-tree mst configurtaion\n\nS1(config-Mstp-Region)#name test\n\nS1(config-Mstp-Region)#instance 1 vlan 10;20\n\nS1(config-Mstp-Region)#instance 2 vlan 30;40\n\nS1(config-Mstp-Region)#exit'\n\n #配置端口模式和透传的Vlan信息（配置E 1/1-4为Trunk，设置透传Vlan 10,20,30,40）\n\nS1(config)#interface ethernet 1/1-4\n\nS1(config-if-port-range)#switchport mode trunk\n\nS1(config-if-port-range)#switchport trunk allowed vlan 10;20;30;40\n\nS1(config-if-port-range)#exit\n\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br"),s("span",{staticClass:"line-number"},[n._v("75")]),s("br"),s("span",{staticClass:"line-number"},[n._v("76")]),s("br"),s("span",{staticClass:"line-number"},[n._v("77")]),s("br"),s("span",{staticClass:"line-number"},[n._v("78")]),s("br"),s("span",{staticClass:"line-number"},[n._v("79")]),s("br"),s("span",{staticClass:"line-number"},[n._v("80")]),s("br"),s("span",{staticClass:"line-number"},[n._v("81")]),s("br"),s("span",{staticClass:"line-number"},[n._v("82")]),s("br"),s("span",{staticClass:"line-number"},[n._v("83")]),s("br"),s("span",{staticClass:"line-number"},[n._v("84")]),s("br"),s("span",{staticClass:"line-number"},[n._v("85")]),s("br"),s("span",{staticClass:"line-number"},[n._v("86")]),s("br"),s("span",{staticClass:"line-number"},[n._v("87")]),s("br"),s("span",{staticClass:"line-number"},[n._v("88")]),s("br"),s("span",{staticClass:"line-number"},[n._v("89")]),s("br"),s("span",{staticClass:"line-number"},[n._v("90")]),s("br"),s("span",{staticClass:"line-number"},[n._v("91")]),s("br"),s("span",{staticClass:"line-number"},[n._v("92")]),s("br"),s("span",{staticClass:"line-number"},[n._v("93")]),s("br"),s("span",{staticClass:"line-number"},[n._v("94")]),s("br"),s("span",{staticClass:"line-number"},[n._v("95")]),s("br"),s("span",{staticClass:"line-number"},[n._v("96")]),s("br"),s("span",{staticClass:"line-number"},[n._v("97")]),s("br"),s("span",{staticClass:"line-number"},[n._v("98")]),s("br"),s("span",{staticClass:"line-number"},[n._v("99")]),s("br"),s("span",{staticClass:"line-number"},[n._v("100")]),s("br"),s("span",{staticClass:"line-number"},[n._v("101")]),s("br"),s("span",{staticClass:"line-number"},[n._v("102")]),s("br"),s("span",{staticClass:"line-number"},[n._v("103")]),s("br"),s("span",{staticClass:"line-number"},[n._v("104")]),s("br"),s("span",{staticClass:"line-number"},[n._v("105")]),s("br"),s("span",{staticClass:"line-number"},[n._v("106")]),s("br"),s("span",{staticClass:"line-number"},[n._v("107")]),s("br"),s("span",{staticClass:"line-number"},[n._v("108")]),s("br"),s("span",{staticClass:"line-number"},[n._v("109")]),s("br"),s("span",{staticClass:"line-number"},[n._v("110")]),s("br"),s("span",{staticClass:"line-number"},[n._v("111")]),s("br"),s("span",{staticClass:"line-number"},[n._v("112")]),s("br"),s("span",{staticClass:"line-number"},[n._v("113")]),s("br"),s("span",{staticClass:"line-number"},[n._v("114")]),s("br"),s("span",{staticClass:"line-number"},[n._v("115")]),s("br"),s("span",{staticClass:"line-number"},[n._v("116")]),s("br"),s("span",{staticClass:"line-number"},[n._v("117")]),s("br"),s("span",{staticClass:"line-number"},[n._v("118")]),s("br"),s("span",{staticClass:"line-number"},[n._v("119")]),s("br"),s("span",{staticClass:"line-number"},[n._v("120")]),s("br"),s("span",{staticClass:"line-number"},[n._v("121")]),s("br"),s("span",{staticClass:"line-number"},[n._v("122")]),s("br"),s("span",{staticClass:"line-number"},[n._v("123")]),s("br"),s("span",{staticClass:"line-number"},[n._v("124")]),s("br"),s("span",{staticClass:"line-number"},[n._v("125")]),s("br"),s("span",{staticClass:"line-number"},[n._v("126")]),s("br"),s("span",{staticClass:"line-number"},[n._v("127")]),s("br"),s("span",{staticClass:"line-number"},[n._v("128")]),s("br"),s("span",{staticClass:"line-number"},[n._v("129")]),s("br"),s("span",{staticClass:"line-number"},[n._v("130")]),s("br"),s("span",{staticClass:"line-number"},[n._v("131")]),s("br"),s("span",{staticClass:"line-number"},[n._v("132")]),s("br"),s("span",{staticClass:"line-number"},[n._v("133")]),s("br"),s("span",{staticClass:"line-number"},[n._v("134")]),s("br"),s("span",{staticClass:"line-number"},[n._v("135")]),s("br"),s("span",{staticClass:"line-number"},[n._v("136")]),s("br"),s("span",{staticClass:"line-number"},[n._v("137")]),s("br"),s("span",{staticClass:"line-number"},[n._v("138")]),s("br"),s("span",{staticClass:"line-number"},[n._v("139")]),s("br"),s("span",{staticClass:"line-number"},[n._v("140")]),s("br")])]),s("h2",{attrs:{id:"第五章-成果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第五章-成果"}},[n._v("#")]),n._v(" 第五章 成果")]),n._v(" "),s("h3",{attrs:{id:"_5-1-sw1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-sw1"}},[n._v("#")]),n._v(" 5.1 sw1")]),n._v(" "),s("p",[s("img",{attrs:{src:a(531),alt:"sw1"}})]),n._v(" "),s("h3",{attrs:{id:"_5-2-sw2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-sw2"}},[n._v("#")]),n._v(" 5.2 sw2")]),n._v(" "),s("p",[s("img",{attrs:{src:a(532),alt:"sw2"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);