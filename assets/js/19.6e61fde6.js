(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{478:function(s,a,t){s.exports=t.p+"assets/img/Documentation.82d8ba90.png"},479:function(s,a,t){s.exports=t.p+"assets/img/catcrontab.0b0ad030.png"},480:function(s,a,t){s.exports=t.p+"assets/img/explain.f062dd68.png"},481:function(s,a,t){s.exports=t.p+"assets/img/write.734b5636.png"},566:function(s,a,t){"use strict";t.r(a);var e=t(2),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"第一章-软件分类-相关软件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一章-软件分类-相关软件"}},[s._v("#")]),s._v(" 第一章 软件分类(相关软件)")]),s._v(" "),a("ul",[a("li",[s._v("cronie      实现定时任务功能")]),s._v(" "),a("li",[s._v("atd            实现定时任务功能 只能设置一次的定时功能，即用完后要重设")]),s._v(" "),a("li",[s._v("anacron   实现定时任务功能 应用在家用电脑 7*24服务器")])]),s._v(" "),a("h2",{attrs:{id:"第二章-简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二章-简介"}},[s._v("#")]),s._v(" 第二章 简介")]),s._v(" "),a("h3",{attrs:{id:"_2-1-系统特殊目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-系统特殊目录"}},[s._v("#")]),s._v(" 2.1 系统特殊目录")]),s._v(" "),a("ul",[a("li",[s._v("系统定时任务周期：每小时 控制定时任务目录：/etc/cron.hourly")]),s._v(" "),a("li",[s._v("系统定时任务周期：每一天 控制定时任务目录：/etc/cron.daily     00：00-23：59")]),s._v(" "),a("li",[s._v("系统定时任务周期：每一周 控制定时任务目录：/etc/cron.weekly   7天")]),s._v(" "),a("li",[s._v("系统定时任务周期：每个月 控制定时任务目录：/etc/cron.monthly  30 28 31")])]),s._v(" "),a("h3",{attrs:{id:"_2-2-用户定时任务-yum-install-y-cronie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-用户定时任务-yum-install-y-cronie"}},[s._v("#")]),s._v(" 2.2 用户定时任务（yum install -y cronie）")]),s._v(" "),a("p",[s._v("每天的02：30进行备份数据")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("用户定时任务查看  crontab -l （list）")]),s._v(" "),a("p",[s._v("说明：列表查看定时任务信息（cron table）")])]),s._v(" "),a("li",[a("p",[s._v("用户定时任务编辑  crontab -e（edit）")]),s._v(" "),a("p",[s._v("说明：编辑配置定时任务信息")]),s._v(" "),a("p",[a("img",{attrs:{src:t(478),alt:"不同用户编写文件"}})])])]),s._v(" "),a("h2",{attrs:{id:"第三章-定时任务实际编写方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三章-定时任务实际编写方法"}},[s._v("#")]),s._v(" 第三章 定时任务实际编写方法")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("定时任务服务环境准备")]),s._v(" "),a("p",[s._v("定时任务是否启动/是否开机自启动")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ps -ef | grep crond\nsystemctl status crond\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@ljq-ct /home/ljq]$systemctl status crond\n● crond.service - Command Scheduler\nLoaded:loaded(/usr/lib/systemd/system/crond.service;enabled; vendor preset: enabled)\nActive: active (running) since Mon 2020-06-29 21:55:47 EDT; 6h ago\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("实际编写定时任务")]),s._v(" "),a("p",[s._v("配置方法：crontab -e")]),s._v(" "),a("p",[s._v("编写语法规范")]),s._v(" "),a("p",[a("img",{attrs:{src:t(479),alt:""}})]),s._v(" "),a("p",[s._v("* * * * * 具体做什么事情")]),s._v(" "),a("h3",{attrs:{id:"写法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写法"}},[s._v("#")]),s._v(" 写法")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("用数值表示时间信息")]),s._v(" "),a("p",[s._v("00 02 * * * 备份文件      凌晨两点备份文件")])]),s._v(" "),a("li",[a("p",[s._v("利用特殊符号表示时间信息")]),s._v(" "),a("p",[a("img",{attrs:{src:t(480),alt:"*解释"}})]),s._v(" "),a("p",[a("img",{attrs:{src:t(481),alt:"书写方式"}})]),s._v(" "),a("blockquote",[a("p",[s._v("补充：")]),s._v(" "),a("p",[s._v("20/10 == 10：20 10分20秒")])])]),s._v(" "),a("li",[a("p",[s._v("实际编写定时任务")]),s._v(" "),a("p",[s._v("每天凌晨两点备份 /date目录到 /backup")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("写上时间信息")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("00 02 * * *\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("写上完成任务的具体命令")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cp -a /date /backup\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("编写定时任务")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("crontab -e\n00  02  *  *  *  cp -a /date /backup\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("p",[s._v("定时任务日志文件：#cat /var/log/cron")])])])])]),s._v(" "),a("h2",{attrs:{id:"第四章-定时任务编写注意事项-规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第四章-定时任务编写注意事项-规范"}},[s._v("#")]),s._v(" 第四章 定时任务编写注意事项:(规范)")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("编写定时任务要有注释说明")])]),s._v(" "),a("li",[a("p",[s._v("编写定时任务路径信息尽量使用绝对路径")])]),s._v(" "),a("li",[a("p",[s._v("编写定时任务命令需要采用绝对路径执行 /usr/sbin/useradd")]),s._v(" "),a("p",[s._v("命令执行成功条件：")]),s._v(" "),a("p",[s._v("useradd ----\x3e $PATH ----\x3e /sbin/useradd ----\x3e 命令执行成功")]),s._v(" "),a("p",[s._v("定时任务执行时，识别的PATH信息只有：/usr/bin:/bin")]),s._v(" "),a("p",[s._v("useradd命令 ----\x3e /usr/sbin/useradd")])]),s._v(" "),a("li",[a("p",[s._v("编写定时任务时，可以将输出到屏幕上的信息保存到黑洞中，避免占用磁盘空间")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("* * * * *\t "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" test.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&>")]),s._v(" /dev/null\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("说明")]),s._v(" "),a("p",[s._v("定时任务中执行命令，如果产生输出到屏幕的信息，都会以邮件方式告知用户")])]),s._v(" "),a("blockquote",[a("p",[s._v("/var/spool/mail/root\t--不断变大占用磁盘空间 \t--占用的block空间")]),s._v(" "),a("p",[s._v("解决方法：")]),s._v(" "),a("p",[s._v("将邮件服务器关闭")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl stop postfix\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("blockquote",[a("p",[s._v("/var/spool/postfix/maildrop/\t--不断产生小文件占用磁盘空间\t--占用的inode空间")]),s._v(" "),a("p",[s._v("解决办法：")]),s._v(" "),a("p",[s._v("删除小文件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" /var/spool/postfix/maildrop/*\nsystemctl start postfix\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("li",[a("p",[s._v("编写定时任务，尽量不要产生屏幕输出信息")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" /data /backup\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zcvf /backup/data.tar.gz /data  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#有信息输出")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zcf /backup/data.tar.gz ./data  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#没有信息输出")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("当需要多个命令完成一个定时任务时，可以利用脚本编写定时任务")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vim backup.sh\ncp -a /data /backup\ntar zcvf /backup/data.tar.gz /data\n\n\ncrontab -e\n#jankinlui-XXXXXXX\n* * * * *\t\t/bin/sh /home/ljq/backup.sh &> /dev/null\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])])]),s._v(" "),a("h2",{attrs:{id:"第五章-定时任务相关文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第五章-定时任务相关文件"}},[s._v("#")]),s._v(" 第五章 定时任务相关文件")]),s._v(" "),a("ul",[a("li",[s._v("定时任务服务配置文件所在目录        /var/spool/cron")]),s._v(" "),a("li",[s._v("定时任务服务运行记录日志文件        /var/log/cron")]),s._v(" "),a("li",[s._v("定时任务服务禁止用户运行黑名单      /etc/cron.deny")])])])}),[],!1,null,null,null);a.default=n.exports}}]);