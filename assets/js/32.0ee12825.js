(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{477:function(s,a,t){s.exports=t.p+"assets/img/NSF.c84cab75.png"},565:function(s,a,t){"use strict";t.r(a);var r=t(2),n=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"第1章-nsf软件介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第1章-nsf软件介绍"}},[s._v("#")]),s._v(" 第1章 NSF软件介绍")]),s._v(" "),a("h3",{attrs:{id:"_1-1-什么是nsf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-什么是nsf"}},[s._v("#")]),s._v(" 1.1 什么是NSF")]),s._v(" "),a("p",[s._v("NSF是Network File System的缩写，中文意思是网络文件共享系统，它的主要功能是通过网络(一般是局域网)让不同的主机系统之间可以共享文件或目录")]),s._v(" "),a("h4",{attrs:{id:"_1-1-1-储存服务的种类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-储存服务的种类"}},[s._v("#")]),s._v(" 1.1.1 储存服务的种类")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("名称")]),s._v(" "),a("th",[s._v("解释")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("FTP")]),s._v(" "),a("td",[s._v("文件传输协议")])]),s._v(" "),a("tr",[a("td",[s._v("samba")]),s._v(" "),a("td",[s._v("windows--Linux之间数据传输")])]),s._v(" "),a("tr",[a("td",[s._v("NFS")]),s._v(" "),a("td",[s._v("Linux--Linux之间数据传输")])])])]),s._v(" "),a("p",[s._v("samba具体部署可以看这篇文章"),a("a",{attrs:{href:"https://blog.cndis.cn/docs/Ubuntu/Ubuntu%E4%B8%8B%E9%85%8D%E7%BD%AEsamba%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E5%A4%B9%E5%85%B1%E4%BA%AB.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("linux部署samba"),a("OutboundLink")],1)]),s._v(" "),a("h4",{attrs:{id:"_1-1-2-利用分布式储存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-利用分布式储存"}},[s._v("#")]),s._v(" 1.1.2 利用分布式储存")]),s._v(" "),a("p",[s._v("Moosefs（mfs）     比较落伍，\nGlusterFS\nFastDFS                   企业应用多")]),s._v(" "),a("h4",{attrs:{id:"_1-1-3-原理示意图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3-原理示意图"}},[s._v("#")]),s._v(" 1.1.3 原理示意图")]),s._v(" "),a("p",[a("img",{attrs:{src:t(477),alt:"原理示意图"}})]),s._v(" "),a("h4",{attrs:{id:"_1-1-4-nfs服务工作原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-4-nfs服务工作原理"}},[s._v("#")]),s._v(" 1.1.4 NFS服务工作原理")]),s._v(" "),a("p",[s._v("服务端：")]),s._v(" "),a("ol",[a("li",[s._v("启动rpc服务，开启111端口")]),s._v(" "),a("li",[s._v("启动nfs服务")]),s._v(" "),a("li",[s._v("实现nfs服务进程和端口好的注册")])]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("补充：检查nfs服务进程与端口注册信息\nrpcinfo -p localhost        //查看本机的nfs进行及使用端口信息")])]),a("p",[s._v("客户端：")]),s._v(" "),a("ol",[a("li",[s._v("与服务端建立TCP网络链接")]),s._v(" "),a("li",[s._v("客户端执行挂载命令，进行远程挂载")]),s._v(" "),a("li",[s._v("可以实现数据远程传输储存")])]),s._v(" "),a("h3",{attrs:{id:"_1-2-nsf储存服务的作用及参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-nsf储存服务的作用及参数说明"}},[s._v("#")]),s._v(" 1.2 NSF储存服务的作用及参数说明")]),s._v(" "),a("ol",[a("li",[s._v("实现数据的共享储存")]),s._v(" "),a("li",[s._v("编写数据操作管理")]),s._v(" "),a("li",[s._v("节省购买服务器磁盘开销")])]),s._v(" "),a("h4",{attrs:{id:"_1-2-1-nfs配置参数权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-nfs配置参数权限"}},[s._v("#")]),s._v(" 1.2.1 NFS配置参数权限")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("权限参数")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("rw")]),s._v(" "),a("td",[s._v("储存目录是否有读写权限")])]),s._v(" "),a("tr",[a("td",[s._v("ro")]),s._v(" "),a("td",[s._v("储存目录是否只读权限")])]),s._v(" "),a("tr",[a("td",[s._v("sync")]),s._v(" "),a("td",[s._v("同步方式存储数据  直接将数据保存到硬盘(数据是安全的)")])]),s._v(" "),a("tr",[a("td",[s._v("async")]),s._v(" "),a("td",[s._v("异步方式存储数据  直接将数据保存到内存(提高数据储存效率)")])]),s._v(" "),a("tr",[a("td",[s._v("no_root_squash")]),s._v(" "),a("td",[s._v("不要将root用户身份进行转换")])]),s._v(" "),a("tr",[a("td",[s._v("root_aquash")]),s._v(" "),a("td",[s._v("将root用户身份进行转换")])]),s._v(" "),a("tr",[a("td",[s._v("all_squash")]),s._v(" "),a("td",[s._v("将所有用户身份都进行转换")])]),s._v(" "),a("tr",[a("td",[s._v("no_all_squash")]),s._v(" "),a("td",[s._v("不要将普通用户身份进行转换")])]),s._v(" "),a("tr",[a("td",[s._v("anonuid")]),s._v(" "),a("td",[s._v("指定的是匿名用户的uid(数字)")])]),s._v(" "),a("tr",[a("td",[s._v("anongid")]),s._v(" "),a("td",[s._v("指定的是匿名用户组的gid（数字）")])])])]),s._v(" "),a("h4",{attrs:{id:"_1-2-2-nfs参数配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-nfs参数配置"}},[s._v("#")]),s._v(" 1.2.2 NFS参数配置")]),s._v(" "),a("p",[s._v("基本配置")]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("vim")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("exports\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("24")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("no_all_squash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n修改映射用户配置：www"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("24")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("anonuid"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("anongid"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"_1-2-3-如何查看nfs默认配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-如何查看nfs默认配置"}},[s._v("#")]),s._v(" 1.2.3 如何查看nfs默认配置")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /var/lib/nfs/etab                      ---记录nfs服务的默认配置记录信息\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_1-2-4-客户端mount命令参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-4-客户端mount命令参数"}},[s._v("#")]),s._v(" 1.2.4 客户端mount命令参数")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("参数")]),s._v(" "),a("th",[s._v("含义")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("rw")]),s._v(" "),a("td",[s._v("实现挂载后挂载点目录可读可写（默认）")])]),s._v(" "),a("tr",[a("td",[s._v("ro")]),s._v(" "),a("td",[s._v("实现挂载后挂载点目录可读")])]),s._v(" "),a("tr",[a("td",[s._v("suid")]),s._v(" "),a("td",[s._v("在共享目录中可以让setuid权限位生效（默认）")])]),s._v(" "),a("tr",[a("td",[s._v("nosuid")]),s._v(" "),a("td",[s._v("在共享目录中可以让setuid权限位失效,提供共享目录的安全")])]),s._v(" "),a("tr",[a("td",[s._v("exec")]),s._v(" "),a("td",[s._v("共享目录中的执行文件可以直接执行")])]),s._v(" "),a("tr",[a("td",[s._v("noexec")]),s._v(" "),a("td",[s._v("共享目录中的执行文件无法直接执行")])]),s._v(" "),a("tr",[a("td",[s._v("auto")]),s._v(" "),a("td",[s._v("可以实现自动挂载(mount -a 实现自动加载)")])]),s._v(" "),a("tr",[a("td",[s._v("noauto")]),s._v(" "),a("td",[s._v("不可以实现自动挂载")])]),s._v(" "),a("tr",[a("td",[s._v("nouser")]),s._v(" "),a("td",[s._v("禁止普通用户可以卸载挂载点")])]),s._v(" "),a("tr",[a("td",[s._v("user")]),s._v(" "),a("td",[s._v("允许普通用户可以卸载挂载点")])])])]),s._v(" "),a("h2",{attrs:{id:"第2章-nsf服务部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第2章-nsf服务部署"}},[s._v("#")]),s._v(" 第2章 NSF服务部署")]),s._v(" "),a("h3",{attrs:{id:"_2-1-nsf部署流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-nsf部署流程"}},[s._v("#")]),s._v(" 2.1 NSF部署流程")]),s._v(" "),a("p",[s._v("RPC：远程过程调用服务程序--- 相当于租房的中介（网络编程支持）")]),s._v(" "),a("h4",{attrs:{id:"服务端部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务端部署"}},[s._v("#")]),s._v(" 服务端部署")]),s._v(" "),a("h5",{attrs:{id:"第一个历程-下载安装软件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一个历程-下载安装软件"}},[s._v("#")]),s._v(" 第一个历程：下载安装软件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-qa")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-E")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nfs | rpc"')]),s._v("\nyum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" nfs-utils rpcbind\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h5",{attrs:{id:"第二个历程-编写nfs服务配置文件介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二个历程-编写nfs服务配置文件介绍"}},[s._v("#")]),s._v(" 第二个历程：编写nfs服务配置文件介绍")]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("vim")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("exports\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("02")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("03")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("01")]),s._v("：设置数据储存的目录  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("02")]),s._v("：设置网络一个白名单（允许哪些主机连接到储存服务器进行数据储存）\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("03")]),s._v("：配置储存目录的权限信息  储存目录一些功能\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h5",{attrs:{id:"第三个历程-编写案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三个历程-编写案例"}},[s._v("#")]),s._v(" 第三个历程：编写案例")]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("vim")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("exports\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("24")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.31")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mnt\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h5",{attrs:{id:"第四个历程-创建一个储存目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第四个历程-创建一个储存目录"}},[s._v("#")]),s._v(" 第四个历程：创建一个储存目录")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /data\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" nfsnobody.nfsnobody /data\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h5",{attrs:{id:"第五个历程-启动服务程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第五个历程-启动服务程序"}},[s._v("#")]),s._v(" 第五个历程：启动服务程序")]),s._v(" "),a("p",[s._v("先启动 rpc服务")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("systemctl start rpcbind.service\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" rpcbind.service\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("在启动 nfs服务")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("systemctl start nfs\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" nfs\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"客户端部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端部署"}},[s._v("#")]),s._v(" 客户端部署")]),s._v(" "),a("h5",{attrs:{id:"第一个历程-安装nfs服务软件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一个历程-安装nfs服务软件"}},[s._v("#")]),s._v(" 第一个历程：安装nfs服务软件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" nfs-utils\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"第二个历程-实现远程挂载共享目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二个历程-实现远程挂载共享目录"}},[s._v("#")]),s._v(" 第二个历程：实现远程挂载共享目录")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" nfs "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".1.31:/data /mnt \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"第三个历程-检查是否挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三个历程-检查是否挂载"}},[s._v("#")]),s._v(" 第三个历程：检查是否挂载")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("df")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("ps：在文件中生成一个文件，确认可以创建无误")])]),a("h5",{attrs:{id:"实现自动挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实现自动挂载"}},[s._v("#")]),s._v(" 实现自动挂载：")]),s._v(" "),a("ol",[a("li",[s._v("利用rc.local")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mount -t nfs 172.16.1.31:/data /mnt "')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v("/etc/rc.local\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("利用fstab文件")])]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("vim")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("fstab\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.31")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data            "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mnt                   nfs              defaults              "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"客户端如何卸载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端如何卸载"}},[s._v("#")]),s._v(" 客户端如何卸载")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("umount")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lf")]),s._v(" /mnt                     ---强制卸载挂载点\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("                   不退出挂载点目录进行卸载\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v("                   强制进行卸载操作\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_2-2-企业互联网公司如何配置nfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-企业互联网公司如何配置nfs"}},[s._v("#")]),s._v(" 2.2 企业互联网公司如何配置NFS")]),s._v(" "),a("h4",{attrs:{id:"_2-2-1-保证网站储存服务器用户数据安全性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-保证网站储存服务器用户数据安全性"}},[s._v("#")]),s._v(" 2.2.1 保证网站储存服务器用户数据安全性：")]),s._v(" "),a("p",[s._v("no_all_squash      需要进行配置       共享目录权限为www\nroot_squash         需要进行配置       root---nfsnobody          data目录---www(uid要设置一样)")]),s._v(" "),a("h4",{attrs:{id:"_2-2-2-企业中如何编辑nfs配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-企业中如何编辑nfs配置文件"}},[s._v("#")]),s._v(" 2.2.2 企业中如何编辑nfs配置文件")]),s._v(" "),a("ol",[a("li",[s._v("通用方法")])]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("24")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("rw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("特殊情况（让部分人员不能操作储存目录  可以看目录中的数据）")])]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("24")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("ro")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("修改默认的匿名用户")])]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("24")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("ro")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("anonuid"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("anongid"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"第3章-nsf服务问题总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第3章-nsf服务问题总结"}},[s._v("#")]),s._v(" 第3章 NSF服务问题总结")]),s._v(" "),a("h3",{attrs:{id:"_3-1-共享目录的权限和哪些因素有关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-共享目录的权限和哪些因素有关"}},[s._v("#")]),s._v(" 3.1 共享目录的权限和哪些因素有关")]),s._v(" "),a("ol",[a("li",[s._v("和储存目录的本身权限有关(755   属主：nfsnobody)")]),s._v(" "),a("li",[s._v("和配置文件中的权限配置有关(rw/ro  xxx_squash  anonuid/anongid)")])]),s._v(" "),a("h3",{attrs:{id:"_3-2nfs服务器重启-挂载后创建数据比较慢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2nfs服务器重启-挂载后创建数据比较慢"}},[s._v("#")]),s._v(" 3.2nfs服务器重启，挂载后创建数据比较慢")]),s._v(" "),a("p",[s._v("服务器重启方式不正确\n服务重启：")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("重启命令")]),s._v(" "),a("th",[s._v("作用")]),s._v(" "),a("th",[s._v("效果")]),s._v(" "),a("th",[s._v("用户感受")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("restart")]),s._v(" "),a("td",[s._v("重启服务")]),s._v(" "),a("td",[s._v("强制断开所有连接")]),s._v(" "),a("td",[s._v("用户感受不好")])]),s._v(" "),a("tr",[a("td",[s._v("reload")]),s._v(" "),a("td",[s._v("重启服务")]),s._v(" "),a("td",[s._v("强制断开没用数据传输的连接")]),s._v(" "),a("td",[s._v("~")])])])]),s._v(" "),a("h3",{attrs:{id:"_3-3-无法实现网络存储服务自动挂载原因"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-无法实现网络存储服务自动挂载原因"}},[s._v("#")]),s._v(" 3.3 无法实现网络存储服务自动挂载原因")]),s._v(" "),a("h4",{attrs:{id:"centos6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos6"}},[s._v("#")]),s._v(" centos6：")]),s._v(" "),a("p",[s._v("根据系统服务启动顺序（串行）\n按照顺序依次启动  network服务 --- sshd服务 --- crond服务 --- rsync服务 --- rpcbind服务 ---  nfs服务\n先加载/etc/fstab   ---   network服务     ---    autofs服务")]),s._v(" "),a("p",[s._v("autofs服务程序：开机自启动\n服务启动好之后，重新加载fstab")]),s._v(" "),a("h4",{attrs:{id:"centos7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos7"}},[s._v("#")]),s._v(" centos7：")]),s._v(" "),a("p",[s._v("根据系统服务启动顺序（并行）\nneywork服务\nsshd服务\ncrond服务\nrsync服务\n先加载/etc/fstab     network服务")]),s._v(" "),a("h3",{attrs:{id:"_3-4-小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-小结"}},[s._v("#")]),s._v(" 3.4 小结")]),s._v(" "),a("h4",{attrs:{id:"_1、nfs存储服务概念介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、nfs存储服务概念介绍"}},[s._v("#")]),s._v(" 1、NFS存储服务概念介绍")]),s._v(" "),a("p",[s._v("a. 实现数据的共享存储\nb. 降低公司磁盘购买成本")]),s._v(" "),a("h4",{attrs:{id:"_2、nfs存储服务工作原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、nfs存储服务工作原理"}},[s._v("#")]),s._v(" 2、NFS存储服务工作原理")]),s._v(" "),a("p",[s._v("a. 部署好一台存储服务器，设置好存储目录\nb. 客户端利用网络挂载的方式进行挂载储存目录\nc. 将数据存储在客户端本地挂载点目录==存储到存储服务器中")]),s._v(" "),a("h4",{attrs:{id:"_3、nfs服务器部署流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、nfs服务器部署流程"}},[s._v("#")]),s._v(" 3、NFS服务器部署流程")]),s._v(" "),a("p",[s._v("RPC：类似于租房的中介  NFS服务启动会有多个进程多个端口（随机端口），客户不方便直接连接服务器")]),s._v(" "),a("h5",{attrs:{id:"服务端部署-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务端部署-2"}},[s._v("#")]),s._v(" 服务端部署")]),s._v(" "),a("p",[s._v("第一步：安装存储服务软件   nfs-utils  rpcbind\n第二部：编写配置文件\n第三步：创建存储目录，并修改属主权限\n第四步：启动服务/开机自动")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("rpcbind\nnfs\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h5",{attrs:{id:"客户端部署-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端部署-2"}},[s._v("#")]),s._v(" 客户端部署")]),s._v(" "),a("p",[s._v("第一步：安装nfs服务软件\n第二部：实现网络存储服务挂载")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mount")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" nfs "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.16")]),s._v(".1.31：/data    挂载点目录\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h5",{attrs:{id:"nfs服务客户端挂载不上排除方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nfs服务客户端挂载不上排除方法"}},[s._v("#")]),s._v(" NFS服务客户端挂载不上排除方法：")]),s._v(" "),a("h6",{attrs:{id:"服务端进行排查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务端进行排查"}},[s._v("#")]),s._v(" 服务端进行排查：")]),s._v(" "),a("ol",[a("li",[s._v("检查nfs进程信息是否注册\nrpcinfo -p localhost/172.16.1.31\n问题原因：\n服务启动顺序不对，没有启动nfs服务")]),s._v(" "),a("li",[s._v("检查有没有可用存储目录\nshowmount -e 172.16.1.31\n问题原因：\n配置文件编写有问题，重启nfs服务")]),s._v(" "),a("li",[s._v("在服务端进行挂载测试\n是否能够在存储目录中创建或删除数据")])]),s._v(" "),a("h6",{attrs:{id:"客户端测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#客户端测试"}},[s._v("#")]),s._v(" 客户端测试：")]),s._v(" "),a("ol",[a("li",[s._v("检查nfs进程信息是否注册\nrpcinfo -p localhost/172.16.1.31\n问题原因：\n服务启动顺序不对，没有启动nfs服务")]),s._v(" "),a("li",[s._v("检查有没有可用存储目录\nshowmount -e 172.16.1.31\n问题原因：\n配置文件编写有问题，重启nfs服务\n网络问题；\nping172.168.1.31\ntelnet 172.16.1.31")])]),s._v(" "),a("h4",{attrs:{id:"_4、nfs服务端配置参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、nfs服务端配置参数"}},[s._v("#")]),s._v(" 4、NFS服务端配置参数")]),s._v(" "),a("p",[s._v("xxx_squash")]),s._v(" "),a("h4",{attrs:{id:"_5、nfs客户端配置说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、nfs客户端配置说明"}},[s._v("#")]),s._v(" 5、NFS客户端配置说明")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mount -t\n实现开机自动挂载\n/etc/rc.local                                  文件要有权限执行\n/etc/fstab\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"title"}),a("p",[s._v("centos7   必须启动    remote-fs.target\ncentos6   必须启动     netfs")])]),a("p",[s._v("需求问题：如何找到一台服务器开机运行了哪些服务")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ll /etc/systemd/system/multi-user.target.wants/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("hr"),s._v(" "),a("p",[s._v("一、存储服务的概念"),a("br"),s._v("\n二、存储服务的部署"),a("br"),s._v("\n三、存储服务的配置"),a("br"),s._v("\n服务端配置操作"),a("br"),s._v("\n客户端配置操作"),a("br"),s._v("\n四、存储服务的原理（不理解可能会导致数据无法储存）"),a("br"),s._v("\n五、客户端挂载应用"),a("br"),s._v("\n六、存储服务企业应用")])])}),[],!1,null,null,null);a.default=n.exports}}]);