(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{549:function(s,a,n){"use strict";n.r(a);var e=n(2),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"第一章-apache-静态网页的搭建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一章-apache-静态网页的搭建"}},[s._v("#")]),s._v(" 第一章 Apache 静态网页的搭建")]),s._v(" "),a("p",[s._v("​\t关闭防火墙 and SELiunx")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("Rpm "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-qa")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" http       --检查软件包（一共4个包）\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#\t\t/etc/httpd/conf/httpd.conf   --apache的主配置文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#\t\t/var/www/html        --默认网站家目录")]),s._v("\nsystemctl start httpd.service    --启动服务\nsystemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" httpd.service   --开机自启启动服务\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"第二章-apache主配置文件的主要参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二章-apache主配置文件的主要参数"}},[s._v("#")]),s._v(" 第二章 apache主配置文件的主要参数")]),s._v(" "),a("p",[s._v("[root@Apache ~]"),a("em",[s._v("# vim /etc/httpd/conf/httpd.conf")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(' 31 serverRoot "/etc/httpd"            *# 存放配置文件的目录*\n 42 Listen 80                      *# Apache服务监听端口*\n 66 User apache                      *# 子进程的用户*\n 67 Group apache                       *# 子进程的组*\n 86 ServerAdmin root@localhost          *# 设置管理员邮件地址*\n 119 DocumentRoot "/var/www/html" --网站家目录\n *# 设置DocumentRoot指定目录的属性*\n 131 <Directory "/var/www/html">           *# 网站容器开始标识*\n 144 Options Indexes FollowSymLinks      *# 找不到主页时，以目录的方式呈现，并允许链接到网站根目录以外*\n 151 AllowOverride None           *# none不使用.htaccess控制,all允许*\n 156 Require all granted          *# granted表示运行所有访问，denied表示拒绝所有访问*\n 157 </Directory>                      *# 容器结束*\n 164 DirectoryIndex index.html        *# 定义主页文件，当访问到网站目录时如果有定义的主页文件，网站会自动访问*\n 316 AddDefaultCharset UTF-8           *# 字符编码，如果中文的话，有可能需要改为gb2312或者gbk,因你的网站文件的默认编码而异*\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"第三章-web服务器的安装与配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三章-web服务器的安装与配置"}},[s._v("#")]),s._v(" 第三章 Web服务器的安装与配置")]),s._v(" "),a("p",[s._v("建立自己的网站（网页），放在Apache服务器的网页根目录/var/www/html/中。")]),s._v(" "),a("p",[s._v("配置")]),s._v(" "),a("p",[s._v("配置文件：/etc/httpd/conf/httpd.conf")]),s._v(" "),a("p",[s._v("# vim /etc/httpd/conf/httpd.conf")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1009行\n\n\\# httpd -t //检查语法\n\nhttpd: Could not reliably determine the server's fully qualified domain name, using ::1 for ServerName\n\nSyntax OK\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("(1)配置每个用户的个人网站")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('①修改Apache服务器的配置文件\n\n\\# vim /etc/httpd/conf/httpd.conf\n\n输入“/public_html”，进行查找。\n\n 360 <IfModule mod_userdir.c>\n\n 361   #\n\n 362   # UserDir is disabled by default since it can confirm the presence\n\n 363   # of a username on the system (depending on home directory\n\n 364   # permissions).\n\n 365   #\n\n 366   UserDir disabled\n\n 367 \n\n 368   #\n\n 369   # To enable requests to /~user/ to serve the user\'s public_html\n\n 370   # directory, remove the "UserDir disabled" line above, and uncomment\n\n 371   # the following line instead:\n\n 372   # \n\n 373   #UserDir public_html\n\n 374 \n\n 375 </IfModule>\n\n 381 #<Directory /home/*/public_html>\n\n 382 #  AllowOverride FileInfo AuthConfig Limit\n\n 383 #  Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec\n\n 384 #  <Limit GET POST OPTIONS>\n\n 385 #    Order allow,deny\n\n 386 #    Allow from all\n\n 387 #  </Limit>\n\n 388 #  <LimitExcept GET POST OPTIONS>\n\n 389 #    Order deny,allow\n\n 390 #    Deny from all\n\n 391 #  </LimitExcept>\n\n 392 #</Directory>\n\n改：\n\n 366   UserDir disabled root //加root，不让root用户架设个人网站\n\n 373   UserDir public_html  //去掉注释符号“#”\n\n定位到381—392行，取消这些行前面的注释符号“#”\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br")])]),a("p",[s._v("②创建你自己的个人网站")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# useradd 301lisi")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# passwd 301lisi")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#　123456")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - 301lisi\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#/home/301lisi")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" public_html\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" public_html/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" index.html\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#<h1>这是301lisi李四的个人网站</h1>")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("③设置组用户和其它用户对用户301lisi的家目录/home/301lisi的进入权限x")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" go+x 301lisi\nll\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#总用量 17")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#drwx--x--x. 5 301lisi 301lisi 1024 5月 21 12:49 301lisi")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#drwx------. 4 lch   lch   1024 5月 16 08:53 lch")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#drwx------. 2 root  root  12288 3月 4 21:23 lost+found")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("④重启httpd服务")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" httpd restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("⑤以“http://192.168.112.128/~用户名”的格式来访问个人网站。")]),s._v(" "),a("p",[s._v("显示：")]),s._v(" "),a("p",[s._v("这是301lisi李四的个人网站")]),s._v(" "),a("p",[s._v("■(2)配置基于（使用）IP地址的虚拟主机")]),s._v(" "),a("p",[s._v("虚拟主机，是指可以在Apache服务器中架设多个网站。")]),s._v(" "),a("p",[s._v("①配置基于IP不同、端口号相同的虚拟主机")]),s._v(" "),a("p",[s._v("Step1 创建两个虚拟网卡、设置好不同的IP；最好ping一下，确保设置的IP都能用。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v(" eth0:1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".112.129 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("netmask "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ifconfig")]),s._v(" eth0:2 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".112.130 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("netmask "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".255.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".112.129\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".112.130\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("Step2 修改Apache服务器的配置文件/etc/httpd/conf/httpd.conf，在里面添加多个虚拟主机的设置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1003 #<VirtualHost *:80>\n\n1004 #  ServerAdmin webmaster@dummy-host.example.com\n\n1005 #  DocumentRoot /www/docs/dummy-host.example.com\n\n1006 #  ServerName dummy-host.example.com\n\n1007 #  ErrorLog logs/dummy-host.example.com-error_log\n\n1008 #  CustomLog logs/dummy-host.example.com-access_log common\n\n1009 #</VirtualHost>\n\n复制以上7行，删除行，取消注释，如下：\n\n1011 <VirtualHost 192.168.112.129>\n\n1012   DocumentRoot /var/www/html/web1\n\n1013 </VirtualHost>\n\n1014 <VirtualHost 192.168.112.130>\n\n1015   DocumentRoot /var/www/html/web2\n\n1016 </VirtualHost>\n\nStep3 分别在/var/www/html目录下创建两个虚拟网站所设置的根目录web1、web2，并且创建相应的首页文件\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /var/www/html\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" web1\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" web2\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" web1/index.html\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#<h1>这是第1个虚拟网站</h1>")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" web1/index.html web2/ \n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" web2/index.html\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#<h1>这是第2个虚拟网站</h1>")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("Step4 重启httpd服务")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" httpd restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("Step5 在Windows中打开浏览器，进行测试：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("http://192.168.112.129\nhttp://192.168.112.130\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("②配置基于IP相同、端口号不同的虚拟主机")]),s._v(" "),a("p",[s._v("以网卡eth0的IP为例，再创建两个虚拟网站，其地址如下：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("http://192.168.112.128:8000\nhttp://192.168.112.128:8888\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("Step1 修改Apache服务器的配置文件/etc/httpd/conf/httpd.conf在里面添加两个虚拟主机的设置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Listen 8000\n\nListen 8888\n\n<VirtualHost 192.168.112.128:8000>\n\n  DocumentRoot /var/www/html/web3\n\n</VirtualHost>\n\n<VirtualHost 192.168.112.128:8888>\n\n  DocumentRoot /var/www/html/web4\n\n</VirtualHost>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("Step2 分别在/var/www/html目录下创建两个虚拟网站所设置的根目录web3、web4，并且创建相应的首页文件")]),s._v(" "),a("p",[s._v("Step3 重启httpd服务")]),s._v(" "),a("p",[s._v("Step4 在Windows中打开浏览器，进行测试：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("http://192.168.112.128:8000\nhttp://192.168.112.128:8888\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("■(3)配置基于域名地址的虚拟主机")]),s._v(" "),a("p",[s._v("一个IP地址，不同域名地址。需要DNS服务器的支持，才能配置成功。")]),s._v(" "),a("p",[s._v("①设置为静态IP地址")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/sysconfig/network-scripts/ifcfg-eth0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("IPADDR=192.168.112.128\nPREFIX=24\nGATEWAY=192.168.112.2\nDNS1=192.168.112.128\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/resolv.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("nameserver 192.168.112.128\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("②修改Apache服务器的配置文件/etc/httpd/conf/httpd.conf，在里面添加两个虚拟主机的设置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1030 NameVirtualHost 192.168.112.128 //添加此行！\n\n1031\n\n1032 <VirtualHost 192.168.112.128>\n\n1033   DocumentRoot /var/www/html/web5\n\n1034   ServerName [www.aaa.com](http://www.aaa.com)\n\n1035 </VirtualHost>\n\n1036\n\n1037 <VirtualHost 192.168.112.128>\n\n1038   DocumentRoot /var/www/html/web6\n\n1039   ServerName [www.bbb.com](http://www.bbb.com)\n\n1040 </VirtualHost>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[s._v("③分别在/var/www/html目录下创建两个虚拟网站所设置的根目录web5、web6，并且创建相应的首页文件")]),s._v(" "),a("p",[s._v("④在DNS服务器中配置对以下两个域名的解析：")]),s._v(" "),a("p",[s._v("http://www.aaa.com → 192.168.112.128")]),s._v(" "),a("p",[s._v("http://www.bbb.com → 192.168.112.128")]),s._v(" "),a("p",[s._v("安装bind和bind-chroot")]),s._v(" "),a("p",[s._v("/etc/named.conf")]),s._v(" "),a("p",[s._v("/etc/named.rfc1912.zones")]),s._v(" "),a("p",[s._v("/var/named/aaa.com.zone")]),s._v(" "),a("p",[s._v("/var/named/bbb.com.zone")]),s._v(" "),a("p",[s._v("启动named服务")]),s._v(" "),a("p",[s._v("(详见DNS服务器的安装与配置)")]),s._v(" "),a("p",[s._v("⑤重启httpd服务")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("service httpd restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("⑥在Windows中打开浏览器，进行测试：")]),s._v(" "),a("p",[s._v("修改Windows中的IP地址，以及将Windows中的DNS设置为Linux的IP地址；")]),s._v(" "),a("p",[s._v("http://www.aaa.com")]),s._v(" "),a("p",[s._v("http://www.bbb.com")]),s._v(" "),a("p",[s._v("■(4)配置虚拟目录（别名）")]),s._v(" "),a("p",[s._v("http://192.168.112.128/ftp")]),s._v(" "),a("p",[s._v("要么/var/www/html/ftp，要么虚拟目录ftp指向/var/ftp/pub")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("vim /etc/httpd/conf/httpd.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("输入“/Alias”，进行查找")]),s._v(" "),a("p",[s._v("定位到551行的“Alias”，以此为模板，复制551行—558行共8行的内容，并粘贴在560行，并作相应地修改。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(' 551 Alias /icons/ "/var/www/icons/"\n\n 552 \n\n 553 <Directory "/var/www/icons">\n\n 554   Options Indexes MultiViews FollowSymLinks\n\n 555   AllowOverride None\n\n 556   Order allow,deny\n\n 557   Allow from all\n\n 558 </Directory>\n\n 559\n\n 560 Alias /ftp "/var/ftp/pub"\n\n 561 \n\n 562 <Directory "/var/ftp/pub/">\n\n 563   Options Indexes MultiViews FollowSymLinks\n\n 564   AllowOverride None\n\n 565   Order allow,deny\n\n 566   Allow from all\n\n 567 </Directory>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("p",[s._v("安装FTP服务器之后，/var/ftp/pub目录会自动创建。")]),s._v(" "),a("p",[s._v("在/var/ftp/pub目录下，创建Linux-iso、software、mp3、picture、drivers等几个子目录。")]),s._v(" "),a("p",[s._v("重启httpd服务")]),s._v(" "),a("p",[s._v("在Windows中打开浏览器，进行测试：")]),s._v(" "),a("p",[s._v("http://192.168.112.128/ftp")]),s._v(" "),a("p",[a("a",{attrs:{href:"ftp://192.168.112.128"}},[s._v("ftp://192.168.112.128")])]),s._v(" "),a("p",[a("a",{attrs:{href:"ftp://192.168.112.128/pub"}},[s._v("ftp://192.168.112.128/pub")])]),s._v(" "),a("p",[s._v("■(5)在Apache服务器中配置PHP的运行环境")]),s._v(" "),a("p",[s._v("在Linux系统中安装PHP软件包：# yum install php")]),s._v(" "),a("p",[s._v("在/var/www/html目录下，创建一个php的测试页面：test.php")]),s._v(" "),a("div",{staticClass:"language-php line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-php"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token php language-php"}},[a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("<?php")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("phpinfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token delimiter important"}},[s._v("?>")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("重启httpd服务")]),s._v(" "),a("p",[s._v("在Windows中打开浏览器，进行测试：")]),s._v(" "),a("p",[s._v("http://192.168.112.128/test.php")]),s._v(" "),a("h2",{attrs:{id:"第四章-配置http证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第四章-配置http证书"}},[s._v("#")]),s._v(" 第四章 配置http证书")]),s._v(" "),a("h3",{attrs:{id:"_4-1-创建ssl证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-创建ssl证书"}},[s._v("#")]),s._v(" 4.1 创建SSL证书")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/pki/tls/certs/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" server.key\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("umask 77 ; \\")]),s._v(" "),a("p",[s._v("/usr/bin/openssl genrsa -aes128 2048 > server.key")]),s._v(" "),a("p",[s._v("Generating RSA private key, 2048 bit long modulus")]),s._v(" "),a("p",[s._v("...............................................................+++")]),s._v(" "),a("p",[s._v("....................................................................................................+++")]),s._v(" "),a("p",[s._v("e is 65537 (0x10001)")]),s._v(" "),a("p",[s._v("Enter pass phrase:123456")]),s._v(" "),a("p",[s._v("Verifying - Enter pass phrase:123456")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("openssl rsa "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-in")]),s._v(" server.key "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-out")]),s._v(" server.key\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("Enter pass phrase for server.key:")]),s._v(" "),a("p",[s._v("writing RSA key")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" server.csr\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("umask 77 ; \\")]),s._v(" "),a("p",[s._v("/usr/bin/openssl req -utf8 -new -key server.key -out server.csr")]),s._v(" "),a("p",[s._v("You are about to be asked to enter information that will be incorporated")]),s._v(" "),a("p",[s._v("into your certificate request.")]),s._v(" "),a("p",[s._v("What you are about to enter is what is called a Distinguished Name or a DN.")]),s._v(" "),a("p",[s._v("There are quite a few fields but you can leave some blank")]),s._v(" "),a("p",[s._v("For some fields there will be a default value,")]),s._v(" "),a("p",[s._v("If you enter '.', the field will be left blank.")]),s._v(" "),a("p",[s._v("-----")]),s._v(" "),a("p",[s._v("Country Name (2 letter code) [XX]:CN  #国家后缀")]),s._v(" "),a("p",[s._v("State or Province Name (full name) []:Shanghai #省")]),s._v(" "),a("p",[s._v("Locality Name (eg, city) [Default City]:Shanghai #市")]),s._v(" "),a("p",[s._v("Organization Name (eg, company) [Default Company Ltd]:LinuxProbe #公司")]),s._v(" "),a("p",[s._v("Organizational Unit Name (eg, section) []:DevOps #部门")]),s._v(" "),a("p",[s._v("Common Name (eg, your name or your server's hostname) []:linuxprobe.org #主机名")]),s._v(" "),a("p",[s._v("Email Address []:root@linuxprobe.org #邮箱")]),s._v(" "),a("p",[s._v("Please enter the following 'extra' attributes")]),s._v(" "),a("p",[s._v("to be sent with your certificate request")]),s._v(" "),a("p",[s._v("A challenge password []:  #默认")]),s._v(" "),a("p",[s._v("An optional company name []:  #默认")]),s._v(" "),a("p",[s._v("#")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("openssl x509 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-in")]),s._v(" server.csr "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-out")]),s._v(" server.crt "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-req")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-signkey")]),s._v(" server.key "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-days")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3650")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("Signature ok")]),s._v(" "),a("p",[s._v("subject=/C=CN/ST=Shanghai/L=Shanghai/O=LinuxProbe/OU=DevOps/CN=linuxprobe.org/emailAddress=root@linuxprobe.org")]),s._v(" "),a("p",[s._v("Getting Private key")]),s._v(" "),a("h3",{attrs:{id:"_4-2-配置ssl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-配置ssl"}},[s._v("#")]),s._v(" 4.2 配置SSL")]),s._v(" "),a("p",[s._v("[1] 配置SSL.")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mod_ssl\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/httpd/conf.d/ssl.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# line 59: 取消注释\nDocumentRoot "/var/www/html"\n# line 60: 取消注释，定义域名\nServerName linuxprobe.org:443\n# line 75: 改变SSLProtocol\nSSLProtocol -All +TLSv1 +TLSv1.1 +TLSv1.2\n# line 100: 改成刚刚创建的server.crt\nSSLCertificateFile /etc/pki/tls/certs/server.crt\n# line 107: 改成刚刚创建的server.key\nSSLCertificateKeyFile /etc/pki/tls/certs/server.key\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl restart httpd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("[2] 如果Firewalld正在运行，请允许HTTPS服务。 HTTPS使用443 / TCP")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("firewall-cmd --add-service"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--permanent")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#success")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#firewall-cmd --reload")]),s._v("\nsuccess\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("[3] 使用Web浏览器通过HTTPS从客户端计算机访问测试页。")]),s._v(" "),a("h3",{attrs:{id:"_4-3-启用身份验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-启用身份验证"}},[s._v("#")]),s._v(" 4.3 启用身份验证")]),s._v(" "),a("p",[s._v("[1]例如，在目录[/var/www/html/auth-basic]下设置基本身份验证设置。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/httpd/conf.d/auth_basic.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# 创建新配置文件\n<Directory /var/www/html/auth-basic>\n  AuthType Basic\n  AuthName "Basic Authentication"\n  AuthUserFile /etc/httpd/conf/.htpasswd\n  require valid-user\n</Directory>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("添加用户：使用“-c”创建新文件（仅为初始注册添加“-c”选项）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("htpasswd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" /etc/httpd/conf/.htpasswd wang\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#New password: # set password")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Re-type new password: # confirm")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#Adding password for user wang")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl restart httpd\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /var/www/html/auth-basic\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /var/www/html/auth-basic/index.html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[s._v("# create a test page\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("div")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token special-attr"}},[a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("style")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),a("span",{pre:!0,attrs:{class:"token value css language-css"}},[a("span",{pre:!0,attrs:{class:"token property"}},[s._v("width")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 100%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("font-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 40px"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("font-weight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" bold"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v("text-align")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" wanger"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\nTest Page for Basic Auth\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("[2] 使用Web浏览器从客户端计算机访问测试页。然后需要认证，如下所示作为设置，用在[1]中添加的用户回答")])])}),[],!1,null,null,null);a.default=t.exports}}]);